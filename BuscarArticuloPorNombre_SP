SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[BuscarArticuloPorNombre]
(
    @NombreArticulo VARCHAR(128)
)
AS
BEGIN
    IF @NombreArticulo IS NOT NULL AND @NombreArticulo != '' AND ISNUMERIC(@NombreArticulo) = 0
    BEGIN
       SELECT A.Id
       , C.Nombre AS ClaseArticulo
       , A.Nombre
       , A.Precio
        FROM Articulo A
        INNER JOIN ClaseArticulo C ON A.IdClaseArticulo = C.Id
        WHERE A.Nombre LIKE '%' + @NombreArticulo + '%' AND ISNUMERIC(A.Nombre) = 0
        ORDER BY A.Nombre ASC

        
        IF @@ROWCOUNT = 0
            BEGIN
                PRINT 'No se encontraron artículos con ese nombre.'
            END
    END
    ELSE IF @NombreArticulo = ''
        BEGIN
            SELECT Id, IdClaseArticulo, Nombre, Precio
            FROM Articulo
        END
    ELSE
        BEGIN
            PRINT 'El nombre del articulo no puede contener números.'
        END
END
GO
